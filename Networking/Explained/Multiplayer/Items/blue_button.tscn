[gd_scene load_steps=6 format=3 uid="uid://d122c6n00bwem"]

[ext_resource type="Texture2D" uid="uid://dcmo23rq31stq" path="res://Items/buttonBlue.png" id="2_3l0fu"]

[sub_resource type="GDScript" id="GDScript_mita3"]
script/source = "extends Area2D

@export
var pressed_texture : Texture2D
@export
var default_texture : Texture2D
@export
var reset_delay := 3.0

var isPressed : bool:
	set (newValue):
		if newValue:
			$Sprite2D.texture = pressed_texture
		else:
			$Sprite2D.texture = default_texture
		isPressed = newValue

func _on_blue_button_body_entered(body):
	if isPressed:
		return
	if not body is Player:
		return
	isPressed = true
	if multiplayer.is_server():
		GameState.button_press_count += 1
		await get_tree().create_timer(reset_delay).timeout
		isPressed = false
"

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_jsqrh"]
load_path = "res://.godot/imported/buttonBlue_pressed.png-dfe399dcc6b9c033175be45718ef0cb4.ctex"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_8apkt"]
size = Vector2(64, 61)

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_a2ivw"]
properties/0/path = NodePath(":isPressed")
properties/0/spawn = true
properties/0/sync = true

[node name="BlueButton" type="Area2D"]
collision_mask = 2
script = SubResource("GDScript_mita3")
pressed_texture = SubResource("CompressedTexture2D_jsqrh")
default_texture = ExtResource("2_3l0fu")

[node name="Sprite2D" type="Sprite2D" parent="."]
position = Vector2(0, -36)
texture = ExtResource("2_3l0fu")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, -29)
shape = SubResource("RectangleShape2D_8apkt")

[node name="MultiplayerSynchronizer" type="MultiplayerSynchronizer" parent="."]
replication_interval = 0.5
replication_config = SubResource("SceneReplicationConfig_a2ivw")

[connection signal="body_entered" from="." to="." method="_on_blue_button_body_entered"]
